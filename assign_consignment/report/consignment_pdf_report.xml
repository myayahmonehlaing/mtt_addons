<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_consignment_template" name="Consignment Report">
        <t t-call="web.external_layout">
            <main>
                <div class="page">
                    <style>
                        /* General table styling for better appearance */
                        .table-bordered {
                        width: 100%;
                        border-collapse: collapse;
                        margin-top: 15px;
                        }
                        .table-bordered th,
                        .table-bordered td {
                        border: 1px solid #ddd;
                        padding: 8px; /* Increased padding for better spacing */
                        text-align: left; /* Default text alignment */
                        }
                        .table-bordered thead th {
                        background-color: #f2f2f2;
                        font-weight: bold;
                        text-align: center; /* Center align column headers */
                        }
                        /* Specific alignment for numeric columns */
                        .text-right {
                        text-align: right !important; /* Force right alignment for numbers */
                        }
                        .text-center {
                        text-align: center !important; /* Force center alignment for numbers */
                        }
                        /* Styling for the report title and date */
                        h2 {
                        text-align: center;
                        margin-bottom: 20px;
                        font-size: 24px;
                        }
                        p {
                        margin-bottom: 10px;
                        }
                        .footer {
                        text-align: center;
                        margin-top: 30px;
                        font-size: 10px;
                        color: #777;
                        }
                    </style>

                    <h2>Consignment Report</h2>
                    <p>As of Date:
                        <span t-esc="date_to"/>
                    </p>

                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th style="width: 5%;" class="text-center">S.No</th>
                                <th style="width: 30%;">Product</th>
                                <t t-foreach="sorted_customers" t-as="customer">
                                    <th class="text-center" t-esc="customer"/>
                                </t>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="products_with_serial" t-as="prod_item">
                                <tr t-att-style="'background-color: ' + (prod_item['serial'] % 2 == 0 and '#eeeeee' or '#ffffff')">
                                    <td class="text-center">
                                        <t t-esc="prod_item['serial']"/>
                                    </td>
                                    <td>
                                        <t t-esc="prod_item['name']"/>
                                    </td>
                                    <t t-foreach="sorted_customers" t-as="customer">
                                        <td class="text-right">
                                            <t t-esc="'%.2f' % data_matrix.get(prod_item['name'], {}).get(customer, 0.0) if data_matrix.get(prod_item['name'], {}).get(customer, 0.0) != 0 else '-'"/>
                                        </td>
                                    </t>
                                </tr>
                            </t>
                        </tbody>
                    </table>

                    <div class="footer">
                        <p>Report Generated:
                            <span t-esc="current_datetime"/>
                        </p>
                        <p>Generated by:
                            <span t-esc="user_name"/>
                        </p>
                    </div>
                </div>
            </main>
        </t>
    </template>

    <record id="action_consignment_report_pdf" model="ir.actions.report">
        <field name="name">Consignment Report PDF</field>
        <field name="model">consignment.report.wizard</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">assign_consignment.report_consignment_template</field>
        <field name="print_report_name">'Consignment Report - %s' % (object.date_to)</field>
<!--        <field name="binding_model_id" ref="model_assign_consignment"/>-->
<!--        <field name="binding_type">report</field>-->
    </record>
</odoo>
